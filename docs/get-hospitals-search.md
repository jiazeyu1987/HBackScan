# GET `/hospitals/search`

- 入口：`code/hospital_scanner/main.py:392`
- 数据访问：`db.search_hospitals`。
- 作用：按名称模糊搜索医院。

## 执行流程
1. 接收查询参数 `q`（必填）与 `limit`（默认 20）。
2. `db.search_hospitals` 执行 `name LIKE %q%` 的参数化查询并限制条数。
3. 返回字典 `{query, limit, results, count}`，其中 `results` 为原始行数据列表。

## 设计原因
- 提供简单的关键字匹配能力，便于快速定位医院记录。

## 优点
- SQL 使用参数绑定，避免注入。
- 接口响应包含原始查询词与结果数量，便于前端显示。

## 缺点与风险
- 查询逻辑仅限 `LIKE`，无拼音/分词/排序权重；字段未建立全文索引。
- 返回结构未复用 `PaginatedResponse`，与其他列表接口不一致。
- 同步 sqlite 查询阻塞事件循环；无防抖/速率限制，可能被滥用。
- 当前医院表通常为空（刷新/扫描未落库），搜索多半返回空但无提示。

## 改进建议
- 引入模糊匹配增强（FTS5、trigram 或应用层分词），并统一分页结构。
- 增加速率限制与最小查询长度，减少滥用与无意义扫描。
- 当数据为空时返回提示，指引先执行 `/refresh` 或 `/scan`。
