# DELETE `/database/clear`

- 入口：`code/hospital_scanner/main.py:113`，调用 `db.clear_all_tables_data()`。
- 作用：清空所有业务表数据，保留表结构。

## 执行流程
1. 记录日志后调用异步封装的 `clear_all_data`。
2. `db.clear_all_tables_data` 遍历 sqlite 非系统表，按硬编码顺序先删子表再删父表，最后尝试重置 `sqlite_sequence`。
3. 成功返回 code=200 的字典；异常抛 500。

## 设计原因
- 提供一键回到“空库”状态，方便调试/重跑。

## 优点
- 删除顺序考虑外键依赖，减少残留。
- 返回时间戳，便于确认执行时刻。

## 缺点与风险
- 无鉴权或二次确认，生产环境误触会导致不可逆数据丢失。
- 未用事务包裹，部分失败可能留下半清空状态。
- 重置 `sqlite_sequence` 对文本主键表无意义，显示出设计混乱。

## 改进建议
- 增加鉴权、环境开关和二次确认；分“软清理/硬清理”模式。
- 使用事务保证全成全败，失败时回滚。
- 输出受影响行数/表清单，增强可观测性。
